# 설계 품질과 트레이드 오프 
‘설계 품질과 트레이드 오프’에서는 절차적 프로그래밍 방식으로 영화 예매 시스템을 다시 구현해 보고, 이렇게 구현된 코드의 품질이 나쁜 이유를 설명한다. 품질을 평가하기 위해 사용할 수 있는 척도인 캡슐화, 응집도, 결합도의 개념도 함께 소개한다.

### 데이터 중심의 관점 vs 책임 중심의 관점

| 데이터 중심의 관점 | 책임 중심의 관점 |
| --- | --- |
| 객체는 자신이 포함하고 있는 데이터를 조작하는데 필요한 오퍼레이션을 정의 | 객체는 다른 객체가 요청할 수 있는 오퍼레이션을 위해 필요한 상태를 보관 |
| 객체의 상태에 초점 | 객체의 행동에 초점 |
| 독립적인 데이터 덩어리 | 협력하는 공동체의 일원 |

객체는 자신이 어떤 데이터를 가지고 있는지를 내부에 캡슐화하고 외부에 공개해서는 안된다. 객체는 스스로의 상태를 책임져야 하며 외부에서는 인터페이스에 정의된 메서드를 통해서만 상태에 접근할 수 있어야 한다. 

객체는 단순한 데이터 제공자가 아니다. 객체 내부에 저장되는 데이터보다 객체가 협력에 참여하면서 수행할 책임을 정의하는 오퍼레이션이 더 중요하다. 

객체내부에 저장해야 하는 데이터가 무엇인가?를 다음과 같은 두개의 개별적인 질문으로 분리해야 한다.

- 이 객체가 어떤 데이터를 포함해야 하는가?
- 이 객체가 데이터에 대해 수행해야 하는 오퍼레이션은 무엇인가?

→ 두 질문은 조합하면 객체의 내부 상태를 저장하는 방식과 저장된 상태에 대해 호출할 수 있는 오퍼레이션의 집합을 얻을 수 있다. 다시 말해 새로운 데이터 타입을 만들 수 있는 것이다. 

1. 데이터 중심의 영화 예매 시스템
    - 데이터 준비 (객체내부에 저장해야 하는 데이터가 무엇인가?)
    - 데이터 중심 설계의 문제점
        - 본질적으로 너무 이른 시기에 데이터에 관해 결정하도록 강요한다.
        - 데이터 중심의 설계에서는 협력이라는 문맥을 고려하지 않고 객체를 고립시킨 채 오퍼레이션을 결정한다.
            
            올바른 객체지향 설계의 무게 중심은 항상 객체의 내부가 아니라 외부에 맞춰져 있어야 한다. 객체가 내부의 어떤 상태를 가지고 그 상태를 어떻게 관리하는가는 부가적인 문제다. 중요한 것은 객체가 다른 객체와 협력하는 방법이다. 
            
    - 데이터 중심 설계의 냄새 :
        - 객체의 종류를 저장하는 인스턴스 변수(movieType)과 인스턴스의 종류에 따라 배타적으로 사용될 인스턴스 변수 (discountAmount, discountPercent)를 하나의 클래스 안에 함께 포함시키는 방식은 데이터 중심의 설계 안에서 흔히 볼 수 있는 패턴이다.
        - 과도한 접근자와 수정자를 가지는 경우
        - 어떤 코드를 수정한 후에 아무런 상관도 없던 코드에 문제가 발생하는 경우
        - 하나의 요구사항 변경을 반영하기 위해 동시에 여러 모듈을 수정해야 하는 경우
2. 좋은 설계 구분 척도 (캡슐화, 결합도⬇️, 응집도⬆️)
    1. 정의  
        1. 캡슐화 : 변경 가능성이 높은 부분을 객체 내부로 숨기는 기법
            
            캡슐화 ⭕
            
            불안정한 부분과 안정적인 부분을 분리해서 변경의 영향을 통제 할 수 있게 함.
            
            캡슐화 **❌**
            
            get과 set 메서드를 통해 클래스 안에 어떤 타입의 어떤 인스턴스 변수가 존재한다는 사실을 퍼블릭 인터페이스에 노골적으로 드러낸다. 
            
        2. 응집도: 모듈에 포함된 내부 요소들이 연관돼 있는 정도를 나타냄
            
            ⬆️ : 🥰 
            
            ⬇️ : 😣 하나의 변경을 수용하기 위해 코드의 여러 곳을 동시에 변경해야 한다.
            
        3. 결합도: 의존성의 정도를 나타내며 다른 모듈에 대해 얼마나 많은 지식을 갖고 있는지를 나타내는 척도 
            
            ⬆️ : 😣한 객체의 인터페이스가 아니라 ‘구현’을 변경할 때도 두 객체 사이의 결합도가 높을 경우 한 객체의 구현을 변경할 떄 다른 객체에 변경의 영향이 전파된다. 
            
            ⬇️ : 🥰 
            
        
        → 캡슐화의 정도가 응집도와 결합도를 결정한다. 응집도와 결합도를 고려하기 전에 먼저 캡슐화를 향상시키기 위해 노력하라.

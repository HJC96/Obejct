# 객체, 설계
‘객체, 설계'에서는 티켓 판매 시스템이라는 간단한 도메인을 예로 들어 책의 전체적인 주제를 함축해서 전달한다. 1장에서 소개하는 용어와 개념들이 이해되지 않더라도 너무 걱정하지 않았으면 한다. 이어지는 장들을 읽다 보면 자연스럽게 1장에서 소개한 내용들이 익숙하게 느껴질 것이다.
### 이론이 먼저일까, 실무가 먼저 일까?

→ 소프트웨어 분야는 아직 걸음마 단계에 머물러 있기 때문에 이론보다 실무가 더 중요하다. 

### 모든 소프트웨어 모듈에 3가지 목적

1. 제대로 동작하는 것
2. 변경을 위해 존재하는 것
3. 코드를 읽는 사람과 의사소통 하는 것
   1. 모듈은 특별한 훈련 없이도 개발자가 쉽게 읽고 이해할 수 있어야 한다. 
→ **모든 모듈은 제대로 실행돼야 하고, 변경이 용이해야 하며, 이해하기 쉬워야 한다.** 

### 어려운 코드의 특징
- 예상에 빗나가는 코드 -> 이해 가능한 코드가 아닌 것
- 세부적인 내용들을 한꺼번에 기억해야 되는 코드
- 한 객체가 변경되면 다른 객체도 영향을 받는 코드(의존성이 높은 코드)

### 설계의 목표
- 캡슐화를 이용해 의존성을 적절히 관리함으로써 객체 사이의 결합도를 낮춰 변경이 용이한 설계를 만드는 것
  - 결합도가 높다는 것은 ? **객체 사이의 의존성이 과한 것**

### 설계의 원칙
- 객체가 어떤 데이터를 가지느냐보다는 객체에 어떤 책임을 할당할 것이냐에 초점을 맞춰야 한다.
  TicketSeller의 책임은 → 티켓을 판매하는 것
  Audience의 책임은 → 티켓을 사는 것
  Theater의 책임은 → 관람객을 입장시키는 것
- 객체의 의도가 명확하게, 즉 자신의 문제를 스스로 책임지고 해결하는 자율적인 존재로 만들어야 한다.  → 객체의 내부 상태를 캡슐화하고 객체 간에 오직 메세지를 통해서만 상호작용하도록 만드는 것
  ex) Theater는 TicketSeller의 내부에 대해서는 전혀 알지 못하지만, TicketSeller가 sellTo 메세지를 이해하고 응답할 수 있다는 사실만 알고 있다. -> **이게 캡슐화고 결합도를 낮추는 방법이다. Theater가 알고 있던 세부사항(의존성)을 Audience와 TicketSeller로 넘겼다.** -> 객체에게 중요한 것은 **행동**이다.
- **객체를 인터페이스와 구현으로 나누고 인터페이스만 공개하는 것은 객체 사이의 결합도를 낮추고 변경하기 쉬운 코드를 작성하기 위해 따라야 하는 가장 기본적인 설계 원칙**이다.
  - public 메서드였던 hasInvitation, minusAmount 등 메서드 들을 더 이상 외부에 사용하지 않고 내부에서 사용하기 때문에 가시성을 private으로 변경 가능.

> 자율적인 존재 ∝ 응집도 ∝ $\frac {1}{의존성}$   ∝ $\frac {1}{결합도}$

설계는 균형의 예술이다. 휼롱한 설계는 적절한 트레이드오프의 결과물이라는 사실을 명심하라(p.33)

ex ) bag이 자율성을 얻는 대신, ticketoffice와 audience사이에 의존성 추가 → 높은 결합도 → 변경하기 어려운 설계

- 기타
  - **밀접하게 연관된 작업만을 수행하고 연관성 없는 작업은 다른 객체에게 위임하는 객체를 가리켜 응집도(cohension)가 높다**고 말한다. 
### 절차지향과 객체지향
    
|                                 | 절차지향         | 객체지향                 |
|---------------------------------|--------------|----------------------|
| **데이터와 프로세스**                   | 별도의 모듈       | **동일한 모듈**           |
| 책임의 이동(Shift of responsibility) | 한 객체에 책임이 집중 | **각 객체가 자신을 스스로 책임** |

